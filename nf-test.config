config {
    // location for all nf-test tests
    testsDir "."

    // nf-test directory including temporary files for each test
    workDir System.getenv("NFT_WORKDIR") ?: ".nf-test"

    // location of an optional nextflow.config file specific for executing tests
    configFile "tests/nextflow.config"

    // ignore tests coming from the nf-core/modules repo
    // Also ignore sentieon tests when SKIP_SENTIEON env var is set (forks/ARM)
    ignore System.getenv("SKIP_SENTIEON") == "true"
        ? ['modules/nf-core/**/tests/*', 'subworkflows/nf-core/**/tests/*', 'tests/sentieon_default.nf.test', 'subworkflows/local/align_star/tests/main.sentieon.nf.test', 'subworkflows/local/quantify_rsem/tests/main.sentieon.nf.test']
        : ['modules/nf-core/**/tests/*', 'subworkflows/nf-core/**/tests/*']

    // run all test with defined profile(s) from the main nextflow.config
    profile "test"

    // list of filenames or patterns that should be trigger a full test run
    triggers 'nextflow.config', 'nf-test.config', 'conf/test.config', 'tests/nextflow.config', 'tests/.nftignore', 'modules.json'

    // load the necessary plugins
    plugins {
        load "nft-bam@0.4.0"
        load "nft-utils@0.0.5"
    }
}
